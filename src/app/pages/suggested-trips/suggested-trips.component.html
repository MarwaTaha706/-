<!-- suggested-trips.component.html -->

<div class="container mx-auto p-4">
  <h1 class="text-3xl font-bold mb-6">الرحلات المقترحة</h1>

  <!-- حالة التحميل -->
  <div *ngIf="isLoading" class="text-center">
    <p>جاري تحميل الرحلات...</p>
    <!-- يمكنك إضافة أيقونة تحميل هنا -->
  </div>

  <!-- عرض الرحلات -->
  <div *ngIf="!isLoading && suggestedTrips.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    
    <!-- استخدام *ngFor لعرض كل رحلة -->
    <div *ngFor="let trip of suggestedTrips" class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#0BB097]">
      
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">من: {{ trip.departure.city }}</h2>
        <span class="bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full">{{ trip.suggestedPrice }} جنيهاً</span>
      </div>
      
      <p class="text-gray-600 mb-2">إلى: {{ trip.destination.city }}</p>
      <p class="text-gray-500 text-sm mb-4">بواسطة: {{ trip.userName }}</p>
      
      <div class="border-t border-gray-200 pt-4">
        <p class="text-sm text-gray-700">
          <i class="bi bi-calendar-event"></i>
          وقت المغادرة: {{ trip.preferredDepartureTime | date:'short' }}
        </p>
        <p class="text-sm text-gray-700">
          <i class="bi bi-people-fill"></i>
المقاعد المتاحة: {{ trip.seatCount }}
        </p>
      </div>

      <!-- أزرار الإجراءات (سنفعلها في الخطوات التالية) -->
      <!-- <div class="mt-6 flex gap-4">
        <button class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600">تفاصيل</button>
        <button class="bg-yellow-500 text-white py-2 px-4 rounded hover:bg-yellow-600">تعديل</button>
        <button class="bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600">حذف</button>
      </div> -->
      <div class="border-t border-gray-200 mt-6 pt-4">
  <p class="text-sm font-semibold text-center text-gray-700 mb-3">تواصل مع الراكب عبر</p>
  <div class="flex justify-center items-center gap-4">
    
    <!-- رابط واتساب -->
    <!-- تحتاج إلى إضافة رقم هاتف الراكب هنا من بيانات الـ API -->
    <a [href]="'https://wa.me/' + trip.passengerPhoneNumber" target="_blank" class="flex flex-col items-center gap-2 text-gray-600 hover:text-green-500 transition-all duration-200 group">
      <div class="flex items-center justify-center w-14 h-14 bg-gray-100 rounded-full group-hover:bg-green-100">
        <i class="bi bi-whatsapp text-2xl text-green-500"></i>
      </div>
      <span class="text-xs font-bold">واتساب</span>
    </a>
    
    <!-- رابط البريد الإلكتروني -->
    <!-- تحتاج إلى إضافة بريد الراكب هنا من بيانات الـ API -->
    <a [href]="'mailto:' + trip.passengerEmail" class="flex flex-col items-center gap-2 text-gray-600 hover:text-blue-500 transition-all duration-200 group">
      <div class="flex items-center justify-center w-14 h-14 bg-gray-100 rounded-full group-hover:bg-blue-100">
        <i class="bi bi-envelope-fill text-2xl text-blue-500"></i>
      </div>
      <span class="text-xs font-bold">البريد</span>
    </a>
    
    <!-- رابط الاتصال الهاتفي -->
    <!-- استخدم نفس رقم الهاتف الخاص بالواتساب -->
    <a [href]="'tel:' + trip.passengerPhoneNumber" class="flex flex-col items-center gap-2 text-gray-600 hover:text-gray-800 transition-all duration-200 group">
      <div class="flex items-center justify-center w-14 h-14 bg-gray-100 rounded-full group-hover:bg-gray-200">
        <i class="bi bi-telephone-fill text-2xl text-gray-700"></i>
      </div>
      <span class="text-xs font-bold">اتصال</span>
    </a>
    
  </div>
</div>

    </div>
  </div>

  <!-- حالة عدم وجود رحلات -->
  <div *ngIf="!isLoading && suggestedTrips.length === 0" class="text-center text-gray-500 mt-10">
    <p>لا توجد رحلات مقترحة حاليًا.</p>
  </div>

</div>
